(function(t){function e(e){for(var n,o,r=e[0],c=e[1],u=e[2],h=0,d=[];h<r.length;h++)o=r[h],i[o]&&d.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"024c":function(t,e,s){"use strict";var n=s("7707"),i=s.n(n);i.a},"034f":function(t,e,s){"use strict";var n=s("04f5"),i=s.n(n);i.a},"04f5":function(t,e,s){},"1a6f":function(t,e,s){"use strict";var n=s("4a47"),i=s.n(n);i.a},"2a7b":function(t,e,s){"use strict";var n=s("f606"),i=s.n(n);i.a},"2dae":function(t,e,s){"use strict";var n=s("6562"),i=s.n(n);i.a},3734:function(t,e,s){"use strict";var n=s("9dfa"),i=s.n(n);i.a},"444a":function(t,e,s){},"4a47":function(t,e,s){},"4f49":function(t,e,s){"use strict";var n=s("e2e4"),i=s.n(n);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header"),s("div",{staticClass:"headerSticky"}),s("router-view"),s("Hinter"),s("QuestionEditor")],1)},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hintWrapper"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showHint,expression:"showHint"}],staticClass:"hint",class:t.hintStatus},[s("div",{staticClass:"hintText"},[t._v(t._s(t.hintText))])])])],1)},r=[],c={computed:{showHint:function(){return this.$store.state.showHint.show},hintText:function(){return this.$store.state.showHint.text},hintStatus:function(){return this.$store.state.showHint.hintStatus}}},u=c,l=(s("1a6f"),s("2877")),h=Object(l["a"])(u,o,r,!1,null,null,null),d=h.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-wrapper"},[s("div",{staticClass:"header"},[s("div",{staticClass:"tabs"},[s("router-link",{attrs:{to:"/"}},[s("span",{staticClass:"tabs-logo"},[t._v("IS-IT")])]),s("router-link",{attrs:{to:"/"}},[s("span",{staticClass:"tabs-tab tabs-index"},[t._v("首页")])]),s("router-link",{attrs:{to:"/topic"}},[s("span",{staticClass:"tabs-tab tabs-topic"},[t._v("话题")])]),s("div",{staticClass:"tabs-search-wrapper"},[s("input",{staticClass:"tabs-search-input",attrs:{placeholder:"搜索功能尚未完成...",type:"text"}}),s("button",{staticClass:"tabs-addQuestion-submit",on:{click:t.addQuestion}},[t._v("提问")])])],1),t.isLogin?s("div",{staticClass:"userInfo"},[s("span",{staticClass:"greeting"},[t._v("您好，")]),t._v(t._s(t.username)+" "),s("span",{staticClass:"logout",on:{click:t.logout}},[t._v("注销")])]):s("div",{staticClass:"loginBar"},[s("button",{staticClass:"loginButton",on:{click:t.showLoginPanel}},[t._v("登录 / 注册")])]),t.showLogin?s("div",{staticClass:"loginPanel-wrapper"},[s("div",{staticClass:"mask",on:{click:t.hiddenLoginPanel}},[s("div",{staticClass:"loginPanel",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"loginMessage-title"},[t._v("\n                        ISIT\n                    ")]),s("div",{staticClass:"loginMessage-body"},[t._v("\n                        是这样吗\n                    ")]),s("input",{staticClass:"username",attrs:{id:"username",type:"text"}}),s("input",{staticClass:"password",attrs:{id:"password",type:"password"}}),s("button",{staticClass:"loginSubmit",on:{click:t.login}},[t._v("登录")]),s("button",{staticClass:"signupSubmit",on:{click:t.signup}},[t._v("注册")])])])]):t._e()])])},f=[];s("4917");function v(t,e,s){var n="http://132.232.48.58:3000"+e;return fetch(n,{method:t,body:JSON.stringify(s)||void 0,credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.json()})}var m=v,g={data:function(){return{showLogin:!1}},methods:{addQuestion:function(){this.$store.state.isLogin?this.$store.commit("toggleQuestionEditor"):this.$store.dispatch("hint",{text:"请先登录！",hintStatus:"fail"})},hiddenLoginPanel:function(){this.showLogin=!1},showLoginPanel:function(){this.showLogin=!0},login:function(){var t=this,e=document.querySelector("#username").value.trim(),s=document.querySelector("#password").value.trim();0!==e.length?0!==s.length?this.$store.dispatch("login",{username:e,password:s}).then(function(e){if(e.username)return t.$store.dispatch("hint",{text:"登录成功！",hintStatus:"success"}),window.location.reload(!0),void(t.showLogin=!1);211===e.code?t.$store.dispatch("hint",{text:"用户名不存在！",hintStatus:"fail"}):210===e.code?t.$store.dispatch("hint",{text:"用户名与密码不匹配！",hintStatus:"fail"}):219===e.code?t.$store.dispatch("hint",{text:"登录失败超过次数限制！请等待15分钟！",hintStatus:"fail"}):t.$store.dispatch("hint",{text:"未知原因登录错误，请重试。",hintStatus:"fail"})}):this.$store.dispatch("hint",{text:"密码不能为空",hintStatus:"fail"}):this.$store.dispatch("hint",{text:"用户名不能为空",hintStatus:"fail"})},signup:function(){var t=this,e=document.querySelector("#username").value.trim(),s=document.querySelector("#password").value.trim();0!==e.length?0!==s.length?e.length>16?this.$store.dispatch("hint",{text:"用户名不能超过16位",hintStatus:"fail"}):s.length>16?this.$store.dispatch("hint",{text:"密码不能超过16位",hintStatus:"fail"}):this.$store.dispatch("signup",{username:e,password:s}).then(function(e){202!==e.code?2!==e.code?e.code?t.$store.dispatch("hint",{text:"未知原因注册错误，请重试。",hintStatus:"fail"}):e.username&&t.$store.dispatch("hint",{text:"注册成功，请登录。",hintStatus:"success"}):t.$store.dispatch("hint",{text:"请先退出登录！",hintStatus:"fail"}):t.$store.dispatch("hint",{text:"该用户名已被使用",hintStatus:"fail"})}):this.$store.dispatch("hint",{text:"密码不能为空",hintStatus:"fail"}):this.$store.dispatch("hint",{text:"用户名不能为空",hintStatus:"fail"})},logout:function(){document.cookie="sessionToken=;  expires=Thu, 01 Jan 1970 00:00:01 GMT;",this.$store.commit("logout"),this.$store.dispatch("hint",{text:"注销成功。",hintStatus:"success"}),window.location.reload(!0)}},computed:{username:function(){return this.$store.state.currentUser.username},isLogin:function(){return this.$store.state.isLogin}},mounted:function(){var t=document.cookie.match(/(?<=sessionToken=)\w+/);if(t&&t[0]){var e=t[0];e&&this.$store.dispatch("loginByCookie",{sessionToken:e}).then(function(t){console.log(t)})}}},w=g,C=(s("8baf"),Object(l["a"])(w,p,f,!1,null,null,null)),_=C.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"index"},[s("div",{staticClass:"QuestionCard-wrapper"},t._l(t.dataArray,function(t){return s("QuestionCard",{staticClass:"QuestionCard",attrs:{cardInfo:t}})})),s("div",{staticClass:"indexSidebar-wrapper",style:t.translateY},[s("Sidebar")],1)])},x=[],I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"questionCard"},[s("div",{staticClass:"source"},[t._v("来自话题："+t._s(t.topic))]),t.hasAnswer?s("div",{staticClass:"user"},[t._v(t._s(t.user.username))]):t._e(),s("router-link",{attrs:{to:"/question/"+t.questionID}},[s("div",{staticClass:"title"},[t._v(t._s(t.title))])]),t.hasAnswer?s("div",[t.showEllipsis&&t.answer.ellipsis?s("div",[t._v(t._s(t.answer.ellipsis)+" "),s("span",{staticClass:"extend",on:{click:t.switchText}},[t._v("阅读全文")])]):s("div",[t._v(t._s(t.answer.content))])]):s("div",{staticClass:"questionDescription"},[t._v(t._s(t.description))]),t.hasAnswer?s("div",{staticClass:"bottomBar"},[s("div",{staticClass:"left"},[s("div",{staticClass:"agreeCount",class:{isAgree:t.answer.isAgree},on:{click:t.agreeAnswer}},[t._v("赞同 "+t._s(t.answer.agreeCount))]),s("div",{staticClass:"commentCount",on:{click:t.switchComment}},[t._v(t._s(t.answer.commentCount)+" "),s("span",[t._v("条评论")])])]),t.showEllipsis?t._e():s("div",{staticClass:"closeText",on:{click:t.switchText}},[t._v("收起")])]):t._e(),t.showComment?s("Comment",{attrs:{answerID:t.answerID,pageCount:t.pageCount}}):t._e()],1)},y=[],S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"commentWrapper"},[s("div",{staticClass:"commentList"},[t._l(t.comments,function(e,n){return s("div",{staticClass:"commentItem"},[s("div",{staticClass:"comment-header"},[s("div",{staticClass:"comment-user"},[t._v("\n                    "+t._s(e.userID.username)+"\n                    "),e.replyTo?s("span",{staticClass:"replyTo-text"},[t._v("回复")]):t._e(),e.replyTo?s("span",{staticClass:"replyto"},[t._v(t._s(e.replyTo))]):t._e()]),s("div",{staticClass:"comment-timeInfo"},[t._v(t._s(t.getTimeInfo(e)))])]),s("div",{staticClass:"comment-content"},[t._v(t._s(e.content))]),s("div",{staticClass:"comment-ctrlPanel"},[t.hasDialog(e)?s("div",{staticClass:"showDialog",on:{click:function(s){t.openDialog(e)}}},[t._v("查看对话")]):t._e(),s("div",{staticClass:"replyToComment",on:{click:function(e){t.toggleReply(n)}}},[t._v("回复")])]),t.showReply(n)?s("div",{staticClass:"comment-replyComment"},[s("div",{staticClass:"replyComment-input",attrs:{contenteditable:"true"},model:{value:t.replyInput,callback:function(e){t.replyInput=e},expression:"replyInput"}}),s("div",{staticClass:"replyComment-button",on:{click:function(s){t.replyComment(e,n)}}},[t._v("提交")])]):t._e()])}),s("Dialog",{attrs:{queueID:t.replyQueue}})],2),s("div",{staticClass:"commentPage"},t._l(t.pages,function(e,n){return s("span",{staticClass:"pageButton",class:{currentPage:t.isCurrentPage(e),pagination:t.isPagination(e),nextPage:t.isNextPage(e),prevPage:t.isPrevPage(e)},on:{click:function(s){t.switchPage(e)}}},[t._v(t._s(e))])})),s("div",{staticClass:"addComment"},[s("div",{staticClass:"addComment-input",attrs:{contenteditable:"true"}}),s("div",{staticClass:"addComment-button",on:{click:t.addComment}},[t._v("提交")])])])},$=[],D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showDialog?s("div",{staticClass:"dialogMask",on:{click:t.closeDialog}},[s("div",{staticClass:"dialogWrapper",on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"dialogTitle"},[t._v("查看对话")]),s("div",{staticClass:"dialogCard-wrapper"},t._l(t.dialogList,function(e){return s("div",{staticClass:"dialogCard"},[s("div",{staticClass:"dialog-header"},[s("div",{staticClass:"dialog-header-userInfo"},[s("span",[t._v(t._s(e.userID.username))]),e.replyTo?s("span",{staticClass:"dialog-header-text"},[t._v("回复")]):t._e(),e.replyTo?s("span",[t._v(t._s(e.replyTo))]):t._e()]),s("div",{staticClass:"dialog-header-timeInfo"},[t._v(t._s(t.getTimeInfo(e)))])]),s("div",{staticClass:"dialog-content"},[t._v(t._s(e.content))])])}))])]):t._e()},T=[],k={props:["queueID"],data:function(){return{dialogList:[]}},computed:{showDialog:function(){var t=this;if(this.$store.state.showDialog){var e=this.queueID,s="/fetch/dialog?queueID=".concat(e);return m("get",s).then(function(e){t.dialogList=e}),!0}return!1}},methods:{closeDialog:function(){this.$store.commit("toggleDialog")},getTimeInfo:function(t){var e=new Date(t.createdAt),s=new Date,n=s-e,i=Math.floor(n/1e3/60);if(i<5)return"刚刚";if(i<60)return"".concat(i," 分钟前");var a=Math.floor(i/60);if(a<24)return"".concat(a," 小时前");var o=Math.floor(a/24);if(o<30)return"".concat(o," 天前");var r=u(e,s);if(r<12)return"".concat(r," 个月前");var c=Math.floor(r/12);return"".concat(c," 年前");function u(t,e){var s=t.getMonth(),n=t.getFullYear(),i=e.getMonth(),a=e.getFullYear(),o=a-n,r=i-s;return r<0&&(o--,r=12+r),r+=12*o,r}}}},A=k,q=(s("4f49"),Object(l["a"])(A,D,T,!1,null,null,null)),P=q.exports,E={props:["answerID","pageCount"],components:{Dialog:P},data:function(){return{pages:[],currentPage:1,comments:null,showDialog:!1,replyQueue:"",replyInput:"123",showReplyIndex:[]}},computed:{},methods:{showReply:function(t){return this.showReplyIndex[t]},toggleReply:function(t){this.showReplyIndex.length<t+1&&(this.showReplyIndex.length=t+1),this.showReplyIndex.splice(t,1,!this.showReplyIndex[t])},replyComment:function(t,e){var s=this,n=this.$el.querySelectorAll(".commentItem")[e].querySelector(".replyComment-input").innerText;if(""!==n)if(n.length>150)this.$store.dispatch("hint",{text:"评论不能超过150字！",hintStatus:"fail"});else if(this.$store.state.isLogin){var i={answerID:this.answerID,replyTo:t.userID.username,replyQueue:t.replyQueue||t.objectId,hasReply:!1,content:n,targetData:{id:t.objectId,hasReply:t.hasReply}};m("POST","/comment/addComment",i).then(function(t){s.$store.dispatch("hint",{text:"评论成功！",hintStatus:"success"}),t.userID.username=s.$store.state.currentUser.username,s.comments.unshift(t),s.showReplyIndex.splice(e,1,!s.showReplyIndex[e])})}else this.$store.dispatch("hint",{text:"请先登录！",hintStatus:"fail"});else this.$store.dispatch("hint",{text:"评论内容不能为空！",hintStatus:"fail"})},addComment:function(){var t=this,e=this.$el.querySelector(".addComment-input").innerText;if(""!==e)if(e.length>150)this.$store.dispatch("hint",{text:"评论不能超过150字！",hintStatus:"fail"});else if(this.$store.state.isLogin){var s={answerID:this.answerID,replyTo:"",replyQueue:"",hasReply:!1,content:e,targetData:{id:"",hasReply:!1}};m("POST","/comment/addComment",s).then(function(e){t.$store.dispatch("hint",{text:"评论成功！",hintStatus:"success"}),e.userID.username=t.$store.state.currentUser.username,t.comments.unshift(e)})}else this.$store.dispatch("hint",{text:"请先登录！",hintStatus:"fail"});else this.$store.dispatch("hint",{text:"评论内容不能为空！",hintStatus:"fail"})},getTimeInfo:function(t){var e=new Date(t.createdAt),s=new Date,n=s-e,i=Math.floor(n/1e3/60);if(i<5)return"刚刚";if(i<60)return"".concat(i," 分钟前");var a=Math.floor(i/60);if(a<24)return"".concat(a," 小时前");var o=Math.floor(a/24);if(o<30)return"".concat(o," 天前");var r=u(e,s);if(r<12)return"".concat(r," 个月前");var c=Math.floor(r/12);return"".concat(c," 年前");function u(t,e){var s=t.getMonth(),n=t.getFullYear(),i=e.getMonth(),a=e.getFullYear(),o=a-n,r=i-s;return r<0&&(o--,r=12+r),r+=12*o,r}},openDialog:function(t){this.replyQueue=t.replyQueue,this.$store.commit("toggleDialog")},hasDialog:function(t){return!!t.replyQueue},fetchComment:function(t){var e=this,s=this.answerID,n=20*(t-1)||0,i="/fetch/comment?answerID=".concat(s,"&skip=").concat(n);m("GET",i).then(function(t){e.comments=t})},isCurrentPage:function(t){return t===this.currentPage},isPagination:function(t){return"..."===t},isNextPage:function(t){return"下一页"===t},isPrevPage:function(t){return"上一页"===t},switchPage:function(t){var e,s=this.pageCount;if("上一页"===t&&1!==this.currentPage)e=this.currentPage-1;else if("下一页"===t&&this.currentPage!==this.pages[this.pages.length-2])e=this.currentPage+1;else{if("number"!==typeof t)return;e=t}this.currentPage=e;var n=[];if(n.push("上一页"),s<=5)for(var i=1;i<=s;i++)n.push(i);else if(s>5)if(s-e<4){n.push("...");for(var a=s-4;a<=s;a++)n.push(a)}else if(e>1){n.push("...");for(var o=e;o<e+3;o++)n.push(o);n.push("..."),n.push(s)}else if(1===e){for(var r=1;r<=4;r++)n.push(r);n.push("..."),n.push(s)}n.push("下一页"),this.pages=n,this.fetchComment(e)}},created:function(){if(this.fetchComment(1),this.pages.push("上一页"),this.pageCount<=5)for(var t=1;t<=this.pageCount;t++)this.pages.push(t);else{for(var e=1;e<=4;e++)this.pages.push(e);this.pages.push("..."),this.pages.push(this.pageCount)}this.pages.push("下一页")}},Q=E,j=(s("2a7b"),Object(l["a"])(Q,S,$,!1,null,null,null)),L=j.exports,M={props:["cardInfo"],components:{Comment:L},data:function(){return{title:this.cardInfo.title,description:this.cardInfo.description,questionID:this.cardInfo.objectId,hasAnswer:!1,answer:null,user:null,showEllipsis:!0,isAgree:!1,showComment:!1,answerID:null,pageCount:1}},computed:{topic:function(){if(this.cardInfo.topic)return this.cardInfo.topic.join("、")}},created:function(){if(this.cardInfo.answers.length>0){var t=this.cardInfo.answers[0];this.hasAnswer=!0,this.answer=t,this.user=t.userID,this.answerID=t.objectId,this.pageCount=Math.ceil(t.commentCount/20)}else this.hasAnswer=!1},methods:{switchText:function(){this.showEllipsis=!this.showEllipsis},switchComment:function(){this.showComment=!this.showComment},agreeAnswer:function(){var t=this.answer;if(t.isAgree){var e="/answer/removeAgree?answerID="+t.objectId;m("get",e).then(function(e){t.isAgree=!1,t.agreeCount--})}else{var s="/answer/addAgree?answerID="+t.objectId;m("get",s).then(function(e){t.isAgree=!0,t.agreeCount++})}}}},O=M,F=(s("6921"),Object(l["a"])(O,I,y,!1,null,null,null)),Y=F.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"indexSidebar",attrs:{fetch:t.fetchUserDetail}},[s("div",{staticClass:"myFollowing indexSidebar-tab"},[s("span",{staticClass:"text"},[t._v("我关注的人")]),s("span",{staticClass:"count"},[t._v(t._s(t.followingCount))])]),s("div",{staticClass:"myFollower indexSidebar-tab"},[s("span",{staticClass:"text"},[t._v("关注我的人")]),s("span",{staticClass:"count"},[t._v(t._s(t.followerCount))])]),s("div",{staticClass:"myAnswer indexSidebar-tab"},[s("span",{staticClass:"text"},[t._v("我的回答")]),s("span",{staticClass:"count"},[t._v(t._s(t.answerCount))])]),s("div",{staticClass:"myFollowingQuestion indexSidebar-tab"},[s("span",{staticClass:"text"},[t._v("我的问题")]),s("span",{staticClass:"count"},[t._v(t._s(t.questionCount))])])])},H=[],N={data:function(){return{followingCount:0,followerCount:0,answerCount:0,questionCount:0}},computed:{fetchUserDetail:function(){var t=this;if(this.$store.state.isLogin){var e={userID:this.$store.state.currentUser.objectId};m("POST","/fetch/userDetail",e).then(function(e){t.followingCount=e.followingCount,t.followerCount=e.followerCount,t.answerCount=e.answerCount,t.questionCount=e.questionCount})}else this.followingCount=0,this.followerCount=0,this.answerCount=0,this.questionCount=0}}},U=N,W=(s("2dae"),Object(l["a"])(U,R,H,!1,null,null,null)),B=W.exports,J={data:function(){return{dataArray:[],shiftY:0,skip:0,hasMoreContent:!0,canLoadMore:!1}},components:{QuestionCard:Y,Sidebar:B},beforeCreate:function(){var t=this,e="/fetch/index?skip="+this.skip;m("get",e).then(function(e){t.dataArray=t.dataArray.concat(e),t.skip+=20,console.log(t.skip),t.canLoadMore=!0})},computed:{translateY:function(){return{transform:"translateY(".concat(this.shiftY,"px)")}}},created:function(){var t=this;window.addEventListener("scroll",function(){if(t.shiftY=window.pageYOffset,window.innerHeight+document.documentElement.scrollTop===document.body.scrollHeight&&t.hasMoreContent&&t.canLoadMore){console.log(t.skip);var e="/fetch/index?skip="+t.skip;console.log(e),m("get",e).then(function(e){t.dataArray=t.dataArray.concat(e),t.skip+=20}).catch(function(e){t.hasMoreContent=!1,t.$store.dispatch("hint",{text:"已无更多内容！",hintStatus:"fail"})})}})}},G=J,z=(s("024c"),Object(l["a"])(G,b,x,!1,null,null,null)),K=z.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showQuestionEditor?s("div",{staticClass:"mask",on:{click:t.toggleQuestionEditor}},[s("div",{staticClass:"aq-wrapper",on:{click:function(t){t.stopPropagation()}}},[s("h3",{staticClass:"aq-navTitle"},[t._v("写下你的问题")]),s("div",{staticClass:"aq-navDescription"},[t._v("描述精确的问题更易得到解答")]),s("div",{staticClass:"aq-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.titleInput,expression:"titleInput"}],staticClass:"aq-title",attrs:{placeholder:"问题标题",type:"text"},domProps:{value:t.titleInput},on:{input:function(e){e.target.composing||(t.titleInput=e.target.value)}}}),t.showTitleWordLimit?s("div",{staticClass:"titleWordLimit"},[t._v("标题超过字数限制（50字）")]):t._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:t.topicInput,expression:"topicInput"}],staticClass:"aq-topic",attrs:{placeholder:"添加话题（最多5个，用空格分开）",type:"text"},domProps:{value:t.topicInput},on:{input:function(e){e.target.composing||(t.topicInput=e.target.value)}}}),t.showTopicWordLimit?s("div",{staticClass:"topicWordLimit"},[t._v("话题数量超过限制（5个）")]):t._e(),s("div",{staticClass:"aq-content-hint"},[t._v("问题描述（可选）：")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.descriptionInput,expression:"descriptionInput"}],staticClass:"aq-description",attrs:{placeholder:"问题背景、条件等详细信息（可选）",type:"text"},domProps:{value:t.descriptionInput},on:{input:function(e){e.target.composing||(t.descriptionInput=e.target.value)}}}),s("button",{staticClass:"questionSubmit",on:{click:t.questionSubmit}},[t._v("提交")])])])]):t._e()},X=[],Z=(s("28a5"),{data:function(){return{titleInput:"",topicInput:"",descriptionInput:""}},computed:{showQuestionEditor:function(){return this.$store.state.showQuestionEditor},showTitleWordLimit:function(){return this.titleInput.length>50},showTopicWordLimit:function(){var t=this.topicInput.split(" ").length;return t>5}},methods:{toggleQuestionEditor:function(){this.$store.commit("toggleQuestionEditor")},questionSubmit:function(){var t=this,e=this.titleInput,s=this.topicInput.split(" "),n=this.descriptionInput;if(!(e.length>50||s.length>5)){var i=!1;if(s=s.map(function(t){var e=t.trim();return""===e&&(i=!0),e}),i)this.$store.dispatch("hint",{text:"话题不能为空！",hintStatus:"fail"});else{var a={title:e,topic:s,description:n};m("POST","/question/addQuestion",a).then(function(e){t.toggleQuestionEditor(),t.$store.dispatch("hint",{text:"提问成功！",hintStatus:"success"})}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！请重试！",hintStatus:"fail"})})}}}}}),tt=Z,et=(s("f859"),Object(l["a"])(tt,V,X,!1,null,null,null)),st=et.exports,nt={components:{Hinter:d,Header:_,Index:K,QuestionEditor:st}},it=nt,at=(s("034f"),Object(l["a"])(it,i,a,!1,null,null,null)),ot=at.exports,rt=s("8c4f"),ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topic"},[s("div",{staticClass:"topicContainer"},[t.isLogin?s("div",{staticClass:"topic-left"},[s("div",{staticClass:"topicCard-wrapper"},[s("h4",{staticClass:"topicCard-title"},[t._v("已关注的话题")]),s("div",{staticClass:"topicCard-tabs"},t._l(t.topicTabs,function(e,n){return s("div",{staticClass:"topic-tab",class:{active:t.isActive(e)},on:{click:function(s){t.switchTopic(e)}}},[t._v(t._s(t.topicTabs[n].topicName))])}))]),t.tab?s("div",{staticClass:"QuestionCard-wrapper"},t._l(t.dataArray,function(t){return s("QuestionCard",{staticClass:"QuestionCard",attrs:{cardInfo:t}})})):s("div",{staticClass:"hintNotFollow"},[t._v("您尚未关注任何话题！")])]):s("div",{staticClass:"hintNotLogin"},[t._v("请先登录！")]),s("div",{staticClass:"indexSidebar-wrapper",style:t.translateY},[s("div",{staticClass:"topic-discoveryTopic"},[s("router-link",{attrs:{to:"/topics"}},[s("button",{staticClass:"topic-gotoTopics"},[t._v("进入话题广场")])])],1),s("Sidebar")],1)])])},ut=[],lt={data:function(){return{dataArray:[],topicTabs:null,shiftY:0,tab:null,skip:0,hasMoreContent:!0,canLoadMore:!1}},components:{QuestionCard:Y,Sidebar:B},methods:{isActive:function(t){return t===this.tab},fetchTopic:function(){var t=this;m("get","/fetch/topic").then(function(e){t.topicTabs=e,t.tab=e[0],t.fetchTopicQuestion(t.tab.objectId)})},fetchTopicQuestion:function(t){var e=this,s="/fetch/topicQuestion?skip=".concat(this.skip,"&topicID=").concat(t);m("get",s).then(function(t){e.dataArray=e.dataArray.concat(t),e.skip+=20,e.canLoadMore=!0})},switchTopic:function(t){this.canLoadMore=!1,this.hasMoreContent=!0,this.skip=0,this.dataArray=[];var e=t.objectId;this.fetchTopicQuestion(e),this.tab=t}},computed:{isLogin:function(){return this.$store.state.isLogin?(this.fetchTopic(),!0):(this.dataArray=[],this.topicTabs=null,this.tab=null,!1)},translateY:function(){return{transform:"translateY(".concat(this.shiftY,"px)")}}},created:function(){var t=this;window.onscroll=function(){if(t.shiftY=window.pageYOffset,window.innerHeight+document.documentElement.scrollTop===document.body.scrollHeight){var e=t.tab.objectId;if(t.hasMoreContent&&t.canLoadMore){var s="/fetch/topicQuestion?skip=".concat(t.skip,"&topicID=").concat(e);m("get",s).then(function(e){t.dataArray=t.dataArray.concat(e),t.skip+=20}).catch(function(e){t.hasMoreContent=!1,t.$store.dispatch("hint",{text:"已无更多内容！",hintStatus:"fail"})})}else t.$store.dispatch("hint",{text:"已无更多内容！",hintStatus:"fail"})}}}},ht=lt,dt=(s("3734"),Object(l["a"])(ht,ct,ut,!1,null,null,null)),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"topics"},[s("div",{staticClass:"topicsContainer"},[s("div",{staticClass:"topics-left"},[s("div",{staticClass:"topicsCard-wrapper"},[s("h4",{staticClass:"topicsCard-title"},[t._v("话题广场")]),s("div",{staticClass:"topicsCard-tabs"},t._l(t.topicTabs,function(e,n){return s("div",{staticClass:"topics-tab",class:{active:t.isActive(e)},on:{click:function(s){t.switchTopic(e)}}},[t._v(t._s(e?e.topicName:null))])}))]),s("div",{staticClass:"QuestionCard-wrapper"},t._l(t.dataArray,function(t){return s("QuestionCard",{staticClass:"QuestionCard",attrs:{cardInfo:t}})}))]),s("div",{staticClass:"indexSidebar-wrapper",style:t.translateY},[s("div",{staticClass:"topics-currentTab"},[s("div",{staticClass:"topics-currentTabName"},[t._v(t._s(t.tab?t.tab.topicName:null))]),t.isFollow?s("button",{on:{click:t.removeFollow}},[t._v("取消关注")]):s("button",{on:{click:t.addFollow}},[t._v("关注")])]),s("Sidebar")],1)])])},vt=[],mt={data:function(){return{dataArray:[],topicTabs:null,shiftY:0,tab:null,isFollow:!1,skip:0,hasMoreContent:!0,canLoadMore:!1}},components:{QuestionCard:Y,Sidebar:B},methods:{isActive:function(t){return t===this.tab},fetchTopic:function(){var t=this;m("get","/fetch/topics").then(function(e){t.topicTabs=e,t.tab=e[0],t.fetchTopicQuestion(t.tab.objectId)})},fetchTopicQuestion:function(t){var e=this;this.fetchTopicIsFollow(t);var s="/fetch/topicQuestion?skip=".concat(this.skip,"&topicID=").concat(t);m("get",s).then(function(t){e.dataArray||(e.dataArray=[]),e.canLoadMore=!0,e.dataArray=e.dataArray.concat(t),e.skip+=20})},fetchTopicIsFollow:function(t){var e=this,s="/fetch/topicIsFollow?topicID=".concat(t);m("get",s).then(function(t){e.isFollow=t})},switchTopic:function(t){this.canLoadMore=!1,this.hasMoreContent=!0,this.skip=0,this.dataArray=[];var e=t.objectId;this.fetchTopicQuestion(e),this.tab=t},addFollow:function(){var t=this,e=this.tab.objectId,s="/follow/topic?topicID=".concat(e);m("get",s).then(function(e){t.isFollow=!0,t.$store.dispatch("hint",{text:"关注成功！",hintStatus:"success"})}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！",hintStatus:"fail"})})},removeFollow:function(){var t=this,e=this.tab.objectId,s="/follow/removeTopic?topicID=".concat(e);m("get",s).then(function(e){t.isFollow=!1,t.$store.dispatch("hint",{text:"取消成功！",hintStatus:"success"})}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！",hintStatus:"fail"})})}},computed:{isLogin:function(){return!!this.$store.state.isLogin||(this.dataArray=null,this.topicTabs=null,this.tab=null,!1)},translateY:function(){return{transform:"translateY(".concat(this.shiftY,"px)")}}},created:function(){var t=this;window.onscroll=function(){var e=window.pageYOffset;if(t.shiftY=e,window.innerHeight+document.documentElement.scrollTop===document.body.scrollHeight){var s=t.tab.objectId;if(t.hasMoreContent&&t.canLoadMore){var n="/fetch/topicQuestion?skip=".concat(t.skip,"&topicID=").concat(s);m("get",n).then(function(e){t.dataArray=t.dataArray.concat(e),t.skip+=20}).catch(function(e){t.hasMoreContent=!1,t.$store.dispatch("hint",{text:"已无更多内容！",hintStatus:"fail"})})}else t.$store.dispatch("hint",{text:"已无更多内容！",hintStatus:"fail"})}},this.fetchTopic()}},gt=mt,wt=(s("fb70"),Object(l["a"])(gt,ft,vt,!1,null,null,null)),Ct=wt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"qt-page"},[s("div",{staticClass:"qt-container"},[s("div",{staticClass:"qt-wrapper"},[s("div",{staticClass:"qt-tabs"},t._l(t.topicData,function(e){return s("div",{staticClass:"qt-tab"},[t._v(t._s(e))])})),s("div",{staticClass:"qt-title"},[t._v(t._s(t.questionData.title))]),s("div",{staticClass:"qt-description"},[t._v(t._s(t.questionData.description))]),s("div",{staticClass:"qt-ctrlPanel"},[s("div",{staticClass:"qt-followButton",on:{click:t.followQuestion}},[t._v(t._s(t.followText))]),s("div",{staticClass:"qt-addAnswer",on:{click:t.writeAnswer}},[t._v("写回答")])])])]),s("div",{staticClass:"answer-wrapper"},t._l(t.answers,function(t){return s("AnswerCard",{staticClass:"answer-item",attrs:{answer:t}})})),s("div",{staticClass:"answer-editor"},[s("AnswerEditor",{attrs:{questionID:t.questionData.objectId}})],1)])},bt=[],xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"answer-item"},[s("div",{staticClass:"answer-user"},[t._v(t._s(t.answer.userID.username))]),s("div",{staticClass:"answer-content"},[t._v(t._s(t.answer.content))]),s("div",{staticClass:"answer-ctrlPanel"},[s("div",{staticClass:"answer-agree",class:{active:t.answer.isAgree},on:{click:t.agreeAnswer}},[t._v("赞同 "+t._s(t.answer.agreeCount))]),s("div",{staticClass:"answer-comment",on:{click:t.toggleComment}},[t._v(t._s(t.answer.commentCount)+" 条评论")])]),t.showComment?s("div",{staticClass:"answer-commentWrapper"},[s("Comment",{attrs:{pageCount:t.pageCount,answerID:t.answer.objectId}})],1):t._e()])},It=[],yt={props:["answer"],components:{Comment:L},data:function(){return{showComment:!1}},methods:{toggleComment:function(){this.showComment=!this.showComment},agreeAnswer:function(){var t=this.answer;if(t.isAgree){var e="/answer/removeAgree?answerID="+t.objectId;m("get",e).then(function(e){t.isAgree=!1,t.agreeCount--})}else{var s="/answer/addAgree?answerID="+t.objectId;m("get",s).then(function(e){t.isAgree=!0,t.agreeCount++})}}},computed:{pageCount:function(){return Math.ceil(this.answer.commentCount/20)}}},St=yt,$t=(s("720e"),Object(l["a"])(St,xt,It,!1,null,null,null)),Dt=$t.exports,Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showAnswerEditor?s("div",{staticClass:"mask",on:{click:t.toggleAnswerEditor}},[s("div",{staticClass:"aa-wrapper",on:{click:function(t){t.stopPropagation()}}},[s("h3",{staticClass:"aa-navTitle"},[t._v("写下你的答案")]),s("div",{staticClass:"aa-navDescription"},[t._v("回答的同时请尊重他人的答案")]),s("div",{staticClass:"aa-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.descriptionInput,expression:"descriptionInput"}],staticClass:"aa-description",attrs:{type:"text"},domProps:{value:t.descriptionInput},on:{input:function(e){e.target.composing||(t.descriptionInput=e.target.value)}}}),s("button",{staticClass:"answerSubmit",on:{click:t.answerSubmit}},[t._v("提交")])])])]):t._e()},kt=[],At={props:["questionID"],data:function(){return{titleInput:"",topicInput:"",descriptionInput:""}},computed:{showAnswerEditor:function(){return this.$store.state.showAnswerEditor}},methods:{toggleAnswerEditor:function(){this.$store.commit("toggleAnswerEditor")},answerSubmit:function(){var t=this,e=this.descriptionInput,s="",n=this.questionID;if(e.length>100&&(s=e.slice(0,100)),0!==e.length){var i={content:e,ellipsis:s,questionID:n};m("POST","/answer/addAnswer",i).then(function(e){t.toggleAnswerEditor(),t.$store.dispatch("hint",{text:"已添加回答！",hintStatus:"success"}),window.location.reload()}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！请重试！",hintStatus:"fail"})})}else this.$store.dispatch("hint",{text:"内容不能为空！",hintStatus:"fail"})}}},qt=At,Pt=(s("69e5"),Object(l["a"])(qt,Tt,kt,!1,null,null,null)),Et=Pt.exports,Qt={components:{AnswerCard:Dt,AnswerEditor:Et},data:function(){return{topicData:{},questionData:{},answers:{}}},computed:{followText:function(){return this.questionData.isFollow?"已关注":"关注问题"}},methods:{followQuestion:function(){var t=this;if(this.$store.state.isLogin)if(this.questionData.isFollow){var e=this.questionData.objectId;m("get","/follow/removeQuestion?questionID="+e).then(function(e){t.$store.dispatch("hint",{text:"取消关注成功！",hintStatus:"success"}),t.questionData.isFollow=!1}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！",hintStatus:"fail"})})}else{var s=this.questionData.objectId;m("get","/follow/question?questionID="+s).then(function(e){t.$store.dispatch("hint",{text:"关注成功！",hintStatus:"success"}),t.questionData.isFollow=!0}).catch(function(e){t.$store.dispatch("hint",{text:"出现未知错误！",hintStatus:"fail"})})}else this.$store.dispatch("hint",{text:"请先登录！",hintStatus:"fail"})},writeAnswer:function(){this.$store.commit("toggleAnswerEditor")}},beforeCreate:function(){var t=this,e="/fetch/questionPage?skip=0&questionID="+this.$route.params.id;m("get",e).then(function(e){console.log(e),t.questionData=e[0],t.answers=e[0].answers,t.topicData=e[0].topic})}},jt=Qt,Lt=(s("b725"),Object(l["a"])(jt,_t,bt,!1,null,null,null)),Mt=Lt.exports;n["a"].use(rt["a"]);var Ot=new rt["a"]({routes:[{path:"/",name:"",component:K},{path:"/topic",component:pt},{path:"/topics",component:Ct},{path:"/question/:id",component:Mt}]}),Ft=(s("96cf"),s("3040")),Yt=s("2f62");n["a"].use(Yt["a"]);var Rt=new Yt["a"].Store({state:{isLogin:!1,currentUser:null,showHint:{show:!1,text:"test",hintStatus:"success"},clock:null,showQuestionEditor:!1,showAnswerEditor:!1,showDialog:!1},mutations:{login:function(t,e){t.isLogin=!0,t.currentUser=e},logout:function(t){t.isLogin=!1,t.currentUser=null},toggleQuestionEditor:function(t){t.showQuestionEditor=!t.showQuestionEditor},toggleAnswerEditor:function(t){t.showAnswerEditor=!t.showAnswerEditor},toggleDialog:function(t){t.showDialog=!t.showDialog}},actions:{hint:function(t,e){var s=e.text,n=e.hintStatus;t.state.showHint.show=!0,t.state.showHint.text=s,t.state.showHint.hintStatus=n,clearTimeout(t.state.clock),t.state.clock=setTimeout(function(){t.state.showHint.show=!1},2500)},loginByCookie:function(){var t=Object(Ft["a"])(regeneratorRuntime.mark(function t(e,s){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,s.sessionToken,t.next=4,m("POST","/user/loginByCookie",s);case 4:return i=t.sent,i.code||n("login",i),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),signup:function(){var t=Object(Ft["a"])(regeneratorRuntime.mark(function t(e,s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s.username,s.password,t.next=3,m("POST","/user/signup",s);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}(),login:function(){var t=Object(Ft["a"])(regeneratorRuntime.mark(function t(e,s){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,s.username,s.password,t.next=4,m("POST","/user/login",s);case 4:return i=t.sent,i.code||n("login",i),t.abrupt("return",i);case 7:case"end":return t.stop()}},t,this)}));return function(e,s){return t.apply(this,arguments)}}()}}),Ht=s("bc3a"),Nt=s.n(Ht);n["a"].config.productionTip=!1,Nt.a.defaults.baseURL="http://localhost:3000",Nt.a.defaults.withCredentials=!0,n["a"].prototype.$http=Nt.a,new n["a"]({router:Ot,store:Rt,render:function(t){return t(ot)}}).$mount("#app")},6344:function(t,e,s){},6562:function(t,e,s){},6921:function(t,e,s){"use strict";var n=s("9fac"),i=s.n(n);i.a},"69e5":function(t,e,s){"use strict";var n=s("444a"),i=s.n(n);i.a},"720e":function(t,e,s){"use strict";var n=s("d480"),i=s.n(n);i.a},7707:function(t,e,s){},"8baf":function(t,e,s){"use strict";var n=s("ffa1"),i=s.n(n);i.a},"9dfa":function(t,e,s){},"9f01":function(t,e,s){},"9fac":function(t,e,s){},b725:function(t,e,s){"use strict";var n=s("6344"),i=s.n(n);i.a},d0c5:function(t,e,s){},d480:function(t,e,s){},e2e4:function(t,e,s){},f606:function(t,e,s){},f859:function(t,e,s){"use strict";var n=s("9f01"),i=s.n(n);i.a},fb70:function(t,e,s){"use strict";var n=s("d0c5"),i=s.n(n);i.a},ffa1:function(t,e,s){}});
//# sourceMappingURL=app.7b04dd53.js.map